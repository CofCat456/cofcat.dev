---
title: å¦‚ä½•å°‡ Vite + Vue-Router å°ˆæ¡ˆéƒ¨ç½²åˆ° Github Pages
description: ç´€éŒ„é—œæ–¼ Vite + Vue-Router å°ˆæ¡ˆä¸­éƒ¨ç½²åˆ° Github Pages çš„æµç¨‹è·Ÿæœƒé‡åˆ°çš„å•é¡Œ
slug: vite-router-deploy
type: Post
socialImage: https://i.imgur.com/uKcUQgP.jpg
public: true
pin: false
tags:
  - Vite
createdAt: 1690567417893.406
updatedAt: 1706157567945
---

## å‰è¨€

è¨˜éŒ„é—œæ–¼ Vite + Vue-Router å°ˆæ¡ˆéƒ¨ç½²åˆ° Github Pages ä¸Šçš„æµç¨‹åŠå¯èƒ½æœƒé‡åˆ°çš„å•é¡Œã€‚

## éƒ¨å±¬æµç¨‹

åœ¨æ¨é€å‰ï¼Œéœ€è¦å…ˆé€²è¡Œç’°å¢ƒçš„è¨­å®šï¼Œé€™æ¨£æª”æ¡ˆæ¨é€ä¸Šå»å¾Œï¼Œæ‰èƒ½é †åˆ©æ‰¾åˆ°æ›è¼‰ä¸Šå»çš„æª”æ¡ˆã€‚

### è¨­å®š

- vite.config  
  é¦–å…ˆéœ€è¦å…ˆç¢ºèªå°ˆæ¡ˆåº•ä¸‹æ˜¯å¦æœ‰ `vite.config.js` çš„æª”æ¡ˆï¼Œæ²’æœ‰çš„è©±è«‹å»ºç«‹ä¸€å€‹ï¼Œæ¥è‘—æˆ‘å€‘éœ€è¦å°‡ Repository çš„åç¨±åŠ å…¥è¨­å®šæª”ä¸­ã€‚
  
```js showLineNumbers {6}
import { defineConfig } from 'vite'
import vue from '@vitejs/plugin-vue'

// https://vitejs.dev/config/
export default defineConfig({
  base: '/REPO/',
  plugins: [vue()],
})

```

é€™æ¨£å°±è¨­å®šå®Œ Vite

- Vue-Router  
  æ¥ä¸‹ä¾†éœ€è¦è¨­å®š `router` çš„ `base path`ï¼Œä¸è¨­å®šçš„è©±ï¼Œå¯èƒ½æœƒé€ æˆæ›è¼‰å¾Œï¼Œrouter è·¯å¾‘éŒ¯èª¤æˆ–æ˜¯æ‰¾ä¸åˆ°é é¢çš„å•é¡Œã€‚

```js showLineNumbers {5}
import { createRouter, createWebHistory } from 'vue-router';
import HelloWrold from '../components/HelloWorld.vue';
import RouterTest from '../components/RouterTest.vue';

const history = createWebHistory('/REPO/');
const routes = [
  {
    path: '/',
    name: 'Hello',
    component: HelloWrold
  },
  {
    path: '/test',
    name: 'RouterTest',
    component: RouterTest
  }
];

export default createRouter({ history, routes });

```

éƒ½è¨­å®šå¥½å¾Œå°±å¯ä»¥é€²å…¥éƒ¨ç½²çš„ç’°ç¯€ã€‚

### éƒ¨ç½²

é¦–å…ˆå°‡æ•´å€‹å°ˆæ¡ˆæ¨é€åˆ° main / master åˆ†æ”¯

```bash showLineNumbers {13, 16, 21}
# åˆå§‹åŒ– git ä¸¦å»ºç«‹æ–°çš„æœ¬åœ°ç«¯ repositoryã€‚
git init

# ä½¿ç”¨ .(--all, -A) å°‡æ‰€æœ‰æª”æ¡ˆåŠ å…¥è¿½è¹¤
git add .

# æäº¤ç›®å‰çš„å„²å­˜çš„ç•°å‹•ï¼Œä¸¦é€é `-m` åƒæ•¸è¨­å®šæ‘˜è¦èªªæ˜æ–‡å­—ã€‚
git commit -m "initial"

# é€™è¡Œå¯ä»¥é¸æ“‡ä¸è¦åŸ·è¡Œ
# ä¸»è¦æ˜¯å°‡ä½ çš„ master åˆ†æ”¯æ”¹åç‚º main
# ä¸€ä½†æ”¹åäº†ï¼Œå¾Œé¢éƒ½è¦è·Ÿè‘—æ”¹å‹•
git branch -M main

# æ·»åŠ é ç«¯æ•¸æ“šåº«
git remote add origin <é ç«¯å„²å­˜åº« url>

# æ¨é€åˆ°ä½ çš„é ç«¯æ•¸æ“šåº«
# ä¸¦ä½¿ç”¨ -u åƒæ•¸å°‡é è¨­çš„é ç«¯å„²å­˜åº«ç‚º origin
# origin ç‚ºé è¨­é ç«¯å„²å­˜åº«çš„åƒç…§åç¨±
git push -u origin main
```

é€™æ¨£å°±å°‡æ•´å€‹å°ˆæ¡ˆæ¨é€åˆ° Github çš„ Repository ä¸Šäº†ã€‚

>é †å¸¶ä¸€æï¼Œ`commit` æ™‚å¦‚æœä¸å¸¶ `-m` åƒæ•¸çš„è©±ï¼Œæœƒé€²å…¥åˆ° vi æˆ– vim ç·¨è¼¯å™¨ä¸­ï¼Œä¸€æ¨£èƒ½é€²è¡Œ `commit` ï¼Œä¸éå¯èƒ½æœƒé‡åˆ°å‡ºä¸ä¾†ã€ä¸èƒ½æ‰“å­—çš„å•é¡Œï¼Œé€™æ¨£çš„è©±å°±æ˜¯å¦ä¸€æ®µæ•…äº‹äº†...

ç›®å‰æˆ‘å€‘çš„å°ˆæ¡ˆé‚„æ²’è¾¦æ³•æ›åˆ° GitHub Pages ä¸Šã€‚
æˆ‘å€‘çœŸæ­£è¦æ›è¼‰çš„æ˜¯ï¼Œæ‰“åŒ…å‡ºä¾†çš„æª”æ¡ˆã€‚

è€Œæˆ‘å€‘ç›®æ¨™æ˜¯å°‡æ‰“åŒ…å¾Œçš„æª”æ¡ˆæ›è¼‰åˆ° `gh-pages` é€™å€‹åˆ†æ”¯ä¸Šï¼Œé€™æ¨£ GitHub Pages æœƒè‡ªå‹•æ‰¾åˆ°é€™å€‹åˆ†æ”¯ï¼Œä¸¦æ›è¼‰ä»–ã€‚

é€™è£¡æˆ‘å€‘ä½¿ç”¨å®˜æ–¹æ‰€æ¨è–¦çš„æ–¹å¼ä¾†éƒ¨ç½²ï¼Œåœ¨[å®˜æ–¹çš„æ–‡ä»¶](https://vitejs.dev/guide/static-deploy.html#github-pages) æåˆ°éœ€è¦å‰µå»ºä¸€å€‹ `deploy.sh` è„šæœ¬ã€‚

> è…³æœ¬ç°¡å–®èªªå°±æ˜¯å°‡ä¸Šé¢ä½¿ç”¨éçš„å¯†å¯†éº»éº»æŒ‡ä»¤æ”¾åœ¨è…³æœ¬è£¡ï¼Œç•¶åŸ·è¡Œè…³æœ¬æ™‚ï¼Œå°±æœƒè‡ªå‹•åŸ·è¡Œè…³æœ¬å…§çš„æŒ‡ä»¤ã€‚

è…³æœ¬å…§å®¹å¦‚ä¸‹
è¦ç‰¹åˆ¥æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœä¸»åˆ†æ”¯æ˜¯ `master` çš„è©±ï¼Œè¨˜å¾—è¦æ›æ‰è…³æœ¬ä¸­æ‰€æœ‰çš„ `main`ã€‚

```bash showLineNumbers {32}
#!/usr/bin/env sh

# abort on errors
set -e

# build
# å°‡å°ˆæ¡ˆæ‰“åŒ…
npm run build

# navigate into the build output directory
cd dist

# place .nojekyll to bypass Jekyll processing
echo > .nojekyll

# if you are deploying to a custom domain
# echo 'www.example.com' > CNAME

git init

# æ ¹æ“šæœ¬äººè§€å¯Ÿï¼Œé€™è¡Œå¤§å¤šäººéƒ½æœƒé¸æ“‡è¨»è§£æ‰ï¼Œå½±éŸ¿ä¸å¤§
# git checkout -B main

git add -A
git commit -m 'deploy'

# å¦‚æœä½ è¦éƒ¨ç½²åœ¨ https://<USERNAME>.github.io
# git push -f git@github.com:<USERNAME>/<USERNAME>.github.io.git main

# ä¸€èˆ¬ä½¿ç”¨éƒ½æ˜¯é¸æ“‡é€™å€‹
# å¦‚æœä½ è¦éƒ¨ç½²åœ¨ https://<USERNAME>.github.io/<REPO>
git push -f git@github.com:<USERNAME>/<REPO>.git main:gh-pages

cd -
```

æ¥ä¸‹ä¾†å°±å¯ä»¥åˆ° Github ä¸ŠæŸ¥çœ‹æ˜¯å¦æœ‰å…©å€‹åˆ†æ”¯ï¼Œä¸¦ä¸”æ˜¯å¦éƒ½æœ‰æˆåŠŸä¸Šå‚³ã€‚

---

### ç’°å¢ƒ

ç•¶æ¨é€å®Œå¾Œï¼Œå¾ˆé–‹å¿ƒæƒ³è¦é¦¬ä¸Šé€²è¡Œä¿®æ”¹çš„åŒæ™‚ï¼Œæœƒæ³¨æ„åˆ°å°ˆæ¡ˆåœ¨æœ¬åœ°ç«¯é‹è¡Œæ™‚ï¼Œæœƒæœ‰é»ä¸ä¸€æ¨£ã€‚
åŸæœ¬çš„ `localhost:3000` å¾Œé¢å»å¤šäº† `repo` çš„è·¯å¾‘ã€‚
é€™æ˜¯å› ç‚ºæˆ‘å€‘å‰›å‰›å·²ç¶“å° `router` çš„ `base path` é€²è¡Œä¿®æ”¹ã€‚

ç¾åœ¨æˆ‘å€‘è¦åŠ å…¥ä¸€äº›åˆ¤æ–·ï¼Œä¾†è®“è¨­å®šæª”åªæœ‰æ­£å¼ç’°å¢ƒä¸­æ‰éœ€è¦é€²è¡Œä¿®æ”¹ã€‚

- vite.config

```js showLineNumbers {6}
import { defineConfig } from 'vite'
import vue from '@vitejs/plugin-vue'

// https://vitejs.dev/config/
export default defineConfig({
  base: process.env.NODE_ENV === 'production' ? '/REPO/' : '',
  plugins: [vue()],
})

```

é€™è£¡æˆ‘å€‘é€é `process.env.NODE_ENV` çš„æ–¹å¼ä¾†å¾—çŸ¥ç•¶å‰çš„ç’°å¢ƒæ˜¯åœ¨é–‹ç™¼é‚„æ˜¯æ­£å¼ã€‚

- Vue-Router

```js showLineNumbers {5-6}
import { createRouter, createWebHistory } from 'vue-router';
import HelloWrold from '../components/HelloWorld.vue';
import RouterTest from '../components/RouterTest.vue';

const path = process.env.NODE_ENV === 'production' ? '/REPO/' : ''
const history = createWebHistory(path);
const routes = [
  {
    path: '/',
    name: 'Hello',
    component: HelloWrold
  },
  {
    path: '/test',
    name: 'RouterTest',
    component: RouterTest
  }
];

export default createRouter({ history, routes });

```

é€™æ˜¯ä¹Ÿæ˜¯ä¸€æ¨£çš„åŸç†ï¼Œåˆ°é€™è£¡å°±è¨­å®šçµæŸäº† ğŸ‰

---

## åƒè€ƒ

- [30 å¤©ç²¾é€š Git ç‰ˆæœ¬æ§ç®¡ (25)ï¼šä½¿ç”¨ GitHub é ç«¯å„²å­˜åº« - è§€å¿µç¯‡](https://ithelp.ithome.com.tw/articles/10140055) iThome éµäººè³½
- [Git & GitHub æ•™å­¸æ‰‹å†Š](https://w3c.hexschool.com/category/repo) W3Hexschool










 